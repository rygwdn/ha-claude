# Home Assistant Configuration

Working directory: /homeassistant (HA config directory)

## CLI Tools

### Built-in (always available)
- `ha core check` — Validate configuration (run before restart!)
- `ha core logs` — View HA core logs
- `ha core restart` — Restart HA core
- `ha backups list` / `ha backups new --name <name>` — Manage backups
- `hass-cli state list/get` — Entity states
- `hass-cli service list/call` — Services
- `hass-cli device list` / `hass-cli area list` — Devices and areas

### Custom tools
- `ha-api` — Service calls with raw JSON, entity history, HA config
- `ha-ws` — WebSocket API (dashboards, automations, registry)
- `ha-browse` — Browser tool (screenshots, DOM inspection, interaction with HA UI)

Run any tool with `--help` for usage details.

## Skills
Use /ha-yaml, /ha-api, /ha-dashboard, /ha-diagnose, /ha-entities for domain knowledge.

## Rules
1. Always run `ha core check` before suggesting an HA restart
2. Always run `ha backups new` before major changes
3. NEVER read or modify secrets.yaml
4. Prefer editing YAML files directly (Claude has Read/Edit/Write tools)
5. Use `ha-ws dashboards save` for Lovelace changes (not direct file edits)
6. Use `ha-ws automations` for UI-managed automations (not file edits)
7. After modifying YAML config files, run `ha core check` to validate
8. Use `ha-browse screenshot` to visually verify dashboard changes
9. `ha-browse screenshot` outputs a file path — read it with the Read tool to view

## File Structure
- `configuration.yaml` — Main configuration (includes other files)
- `automations.yaml` — File-based automation definitions
- `scripts.yaml` — Script definitions
- `scenes.yaml` — Scene definitions
- `customize.yaml` — Entity customizations
- `secrets.yaml` — DO NOT READ OR MODIFY
- `custom_components/` — Custom integrations (HACS or manual)
- `.storage/` — HA internal storage (use APIs, not direct edits)
